# ────────────────────────────
# GENERAL CONFIG AND VARIABLES
# ────────────────────────────

set $mod Mod1
set $mode_resize resize
set $mode_launch launch

set $ws_www 1: WWW 
set $ws_tty 2: TTY 
set $ws_dev 3: DEV 
set $ws_msg 4: MSG 
set $ws_mus 5: MUS 
set $ws_gfx 6: GFX 
set $ws_vm 7: VM 

set $up l
set $down k
set $left j
set $right semicolon

set $font_dmenu Fira Sans:pixelsize=14

set $color_focus        #CC6666
set $color_active       #43484D
set $color_inactive     #2D3033
set $color_fg           #C5C8C6
set $color_bg           #1D1F21
set $color_bg_inactive  #6E7880

# Font for window titles
font pango:Fira Sans Regular 10

# Modifier to drag floating windows around
floating_modifier $mod

# ─────────
# AUTOSTART
# ─────────

exec i3-msg workspace "$ws_www", exec chromium
exec i3-msg workspace "$ws_tty", exec i3-sensible-terminal
exec i3-msg workspace "$ws_msg", exec thunderbird
exec i3-msg workspace "$ws_mus", exec spotify

exec "clipmenud" 
exec "gnome-screensaver"
exec "insync start --headless"


# ───────────
# KEYBINDINGS
# ───────────

# Open a terminal
bindsym $mod+Return exec i3-sensible-terminal

# Kill focused window
bindsym $mod+Shift+q kill

# Change focus
bindsym $mod+$left focus left
bindsym $mod+$down focus down
bindsym $mod+$up focus up
bindsym $mod+$right focus right

# (arrow keys)
bindsym mod+Left focus left
bindsym mod+Down focus down
bindsym mod+Up focus up
bindsym mod+Right focus right

# Move focused window
bindsym $mod+Shift+$left move left
bindsym $mod+Shift+$down move down
bindsym $mod+Shift+$up move up
bindsym $mod+Shift+$right move right

# (arrow keys)
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# Set split mode
bindsym $mod+h split h
bindsym $mod+v split v

# Change container layout
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# Toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# Change focus between tiling / floating windows
bindsym $mod+Shift+f focus mode_toggle

# Enter fullscreen mode
bindsym $mod+f fullscreen toggle

# Focus the parent container
bindsym $mod+a focus parent

# Focus the child container
bindsym $mod+Shift+a focus child

# Move the currently focused window to the scratchpad
bindsym $mod+backslash move scratchpad

# Show the next scratchpad window or hide the focused scratchpad window.
# If there are multiple scratchpad windows, this command cycles through them.
bindsym $mod+Shift+backslash scratchpad show

# Switch to workspace
bindsym $mod+1 workspace $ws_www
bindsym $mod+2 workspace $ws_tty
bindsym $mod+3 workspace $ws_dev
bindsym $mod+4 workspace $ws_msg
bindsym $mod+5 workspace $ws_mus
bindsym $mod+6 workspace $ws_gfx
bindsym $mod+7 workspace $ws_vm
bindsym $mod+8 workspace 8
bindsym $mod+9 workspace 9
bindsym $mod+0 workspace 10

# Move focused container to workspace
bindsym $mod+Shift+1 move container to workspace $ws_www
bindsym $mod+Shift+2 move container to workspace $ws_tty
bindsym $mod+Shift+3 move container to workspace $ws_dev
bindsym $mod+Shift+4 move container to workspace $ws_msg
bindsym $mod+Shift+5 move container to workspace $ws_mus
bindsym $mod+Shift+6 move container to workspace $ws_gfx
bindsym $mod+Shift+7 move container to workspace $ws_vm
bindsym $mod+Shift+8 move container to workspace 8
bindsym $mod+Shift+9 move container to workspace 9
bindsym $mod+Shift+0 move container to workspace 10

# Move a workspace from one output to another
bindsym $mod+m move workspace to output left

# Jump to urgent workspace
bindsym $mod+x [urgent=latest] focus

# Jump back-and-forth from workspace to workspace
workspace_auto_back_and_forth yes
bindsym $mod+z workspace back_and_forth
bindsym $mod+Shift+z move container to workspace back_and_forth

# Reload the configuration file
bindsym $mod+Shift+c reload

# Restart i3 inplace
bindsym $mod+Shift+r restart

# Lock the screen
bindsym Control+$mod+l exec "gnome-screensaver-command -l"

# Multimedia keys
bindsym XF86AudioPlay exec playerctl play-pause
bindsym XF86AudioNext exec playerctl next
bindsym XF86AudioPrev exec playerctl previous
bindsym XF86AudioMute exec ponymix toggle


# ─────────────
# SPECIAL MODES
# ─────────────

# Resize windows
mode "$mode_resize" {
    bindsym $left       resize shrink width 5 px or 5 ppt
    bindsym $down       resize grow height 5 px or 5 ppt
    bindsym $up         resize shrink height 5 px or 5 ppt
    bindsym $right      resize grow width 5 px or 5 ppt

    bindsym Left        resize shrink width 5 px or 5 ppt
    bindsym Down        resize grow height 5 px or 5 ppt
    bindsym Up          resize shrink height 5 px or 5 ppt
    bindsym Right       resize grow width 5 px or 5 ppt
    
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+r mode "$mode_resize"

# Quicklaunch applications
mode "$mode_launch" {
    bindsym f exec filezilla, mode "default"
    bindsym m exec mysql-workbench, mode "default"
    bindsym p exec pcmanfm, mode "default"

    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+o mode "$mode_launch"


# ──────────────────
# WINDOW ASSIGNMENTS 
# ──────────────────

assign [class="chromium"]    "$ws_www"
assign [class="gimp"]        "$ws_gfx"
assign [class="spotify"]     "$ws_mus"

for_window [class="chromium"]       workspace "$ws_www", focus
for_window [class="jetbrains-*"]    workspace "$ws_dev"

for_window [class="file-roller"]    floating enable
for_window [class="galculator"]     floating enable


# ────────────────────
# STATUS BAR AND LOOKS
# ────────────────────

bar {
    status_command python ~/.i3/status.py
    position top
    tray_output none 
    strip_workspace_numbers yes
    font pango: Fira Sans Regular 13

    colors {
        separator    $color_bg
        background   $color_bg
        statusline   $color_fg

        # <colorclass>       <border>        <background>    <text>
        focused_workspace    $color_focus    $color_focus    $color_bg
        active_workspace     $color_active   $color_active   $color_fg
        inactive_workspace   $color_bg       $color_bg       $color_active
        urgent_workspace     $color_focus    $color_bg       $color_fg
    }
}

# Window borders and edges
new_window normal 4px
new_float normal 2px
hide_edge_borders both

# <colorclass>            <border>          <bg>              <text>               <indicator>
client.focused            $color_fg         $color_fg         $color_bg            $color_focus
client.focused_inactive   $color_inactive   $color_inactive   $color_fg            $color_focus    
client.unfocused          $color_inactive   $color_inactive   $color_bg_inactive   $color_focus    
client.urgent             $color_active     $color_active     $color_fg            $color_focus
client.background         $color_bg


# ─────
# MENUS
# ─────

# Program launcher (dmenu)
bindsym $mod+d exec dmenu_run -i -b -p 'Run' -fn '$font_dmenu' -nb '$color_bg' \
    -nf '$color_fg' -sb '$color_focus' -sf '$color_bg'

# Clipboard manager (clipmenu)
bindsym $mod+c exec clipmenu -i -b -p 'Clipboard' -fn '$font_dmenu' \
    -nb '$color_bg' -nf '$color_fg' -sb '$color_focus' -sf '$color_bg'
